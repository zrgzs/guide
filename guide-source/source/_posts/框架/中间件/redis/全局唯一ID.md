---
title: 全局唯一ID
date: 2023-09-07 17:59:14
categories:
- 框架
- 中间件
- redis
author: wspstart
comment: false
---


## 1、需求描述
当数据量很大，并且要求ID唯一的时候，我们需要生成唯一ID，我们可能会根据ID去不同的表中对比获取数据。所以全局唯一 ID 的两个核心需求就是：① 全局唯一性② 粗略有序性

## 2、使用数据库自增ID优缺点
如果使用数据库提供的自增ID来实现，这样的ID会太明显，数据量过大需要进行分表时，两个表都进行生成唯一ID，ID可能会冲突。mysql自带自增生成id，oracle可以用序列生成id,但在数据库集群环境下，扩展性不好

## 3、使用UUID的优缺点
① 生成的ID太长，没有任何规律性② uuid生成全球唯一id,生成方式简单粗暴，本地生成，没有网络开销，效率高；缺点长度较长，没有递增趋势性，不易维护，常用于生成token令牌。


## 4、雪花ID优缺点
基于雪花算法snowflake 生成全局id，本地生成，没有网络开销，效率高，但是依赖机器时钟。


## 5、Redis 生成全局唯一ID
基于redis单线程的特点生成全局唯一id，redis性能高，支持集群分片。为了增加ID的安全性，我们可以不直接使用Redis自增的数值，而是拼接一些其它信息：![image.png](https://cdn.jsdelivr.net/gh/zrgzs/images@main/images/20230907220545.jpg)ID的组成部分：符号位：1bit，永远为0时间戳：31bit，以秒为单位，可以使用69年序列号：32bit，秒内的计数器，支持每秒产生2^32个不同ID实现：
