{
    "version": "https://jsonfeed.org/version/1",
    "title": "卓软信息工作室 • All posts by \"linux运维\" category",
    "description": "",
    "home_page_url": "https://zrgzs.github.io/guide",
    "items": [
        {
            "id": "https://zrgzs.github.io/guide/2023/10/10/Linux%E8%BF%90%E7%BB%B4/environments%20install/",
            "url": "https://zrgzs.github.io/guide/2023/10/10/Linux%E8%BF%90%E7%BB%B4/environments%20install/",
            "title": "CentOS 环境安装",
            "date_published": "2023-10-10T15:00:24.094Z",
            "content_html": "<h1 id=\"centos-环境安装\"><a class=\"markdownIt-Anchor\" href=\"#centos-环境安装\">#</a> CentOS 环境安装</h1>\n<p>系统：CentOS 7.6</p>\n<h2 id=\"1-更新-yum\"><a class=\"markdownIt-Anchor\" href=\"#1-更新-yum\">#</a> 1 更新 yum</h2>\n<p><code>yum update -y</code></p>\n<h2 id=\"2-安装-java\"><a class=\"markdownIt-Anchor\" href=\"#2-安装-java\">#</a> 2 安装 Java</h2>\n<p><strong>访问 Orcal 官网</strong></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cub3JhY2xlLmNvbS9qYXZhL3RlY2hub2xvZ2llcy9kb3dubG9hZHMv\">Java Downloads | Oracle</span></p>\n<p><strong>下载合适的版本</strong></p>\n<p><code>arch</code>  或  <code>uname -m</code>  命令可查看服务器架构类型</p>\n<p><strong>通过 scp 命令将 jdk 上传到 服务器</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token number\">12</span>:46<span class=\"token punctuation\">]</span>  Shell                                                                                                             95ms</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> ~<span class=\"token punctuation\">\\</span>Downloads</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>❯ <span class=\"token function\">scp</span> <span class=\"token parameter variable\">-i</span> D:<span class=\"token punctuation\">\\</span>developmentEnvironment<span class=\"token punctuation\">\\</span>server<span class=\"token punctuation\">\\</span>tencentcloud<span class=\"token punctuation\">\\</span>zrgzs_root.pem .<span class=\"token punctuation\">\\</span>jdk-8u381-linux-x64.tar.gz root@115.159.49.90:/root/jdk-8u381.tar.gz</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>jdk-8u381-linux-i586.tar.gz                                                                     <span class=\"token number\">100</span>%  136MB  <span class=\"token number\">11</span>.2MB/s   00:12</pre></td></tr></table></figure><p><strong>然后把 jdk 移动到  <code>/usr</code>  下</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mv jdk-8u381.tar.gz /usr/local/java.tar.gz</span></pre></td></tr></table></figure><p>** 解压 jdk **</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cd /usr/local</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos usr<span class=\"token punctuation\">]</span><span class=\"token comment\"># tar -xvzf java.tar.gz</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos usr<span class=\"token punctuation\">]</span><span class=\"token comment\"># mv jdk1.8.0_381/ java</span></pre></td></tr></table></figure><p><strong>配置环境变量</strong></p>\n<p>执行  <code>vim /etc/profile.d/java.sh</code></p>\n<p>添加内容如下：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token shebang important\">#!/bin/bash</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># @description: Java 环境</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># @author: Ding</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">JAVA_HOME</span><span class=\"token operator\">=</span>/usr/local/java</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token variable\">$JAVA_HOME</span>/bin:<span class=\"token environment constant\">$PATH</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">CLASSPATH</span><span class=\"token operator\">=</span>.:<span class=\"token variable\">$JAVA_HOME</span>/lib/dt.jar:<span class=\"token variable\">$JAVA_HOME</span>/lib/tools.jar</pre></td></tr></table></figure><p><strong>然后重新加载环境变量并检查 java 版本</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos java<span class=\"token punctuation\">]</span><span class=\"token comment\"># source /etc/profile</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos java<span class=\"token punctuation\">]</span><span class=\"token comment\"># java -version</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">java</span> version <span class=\"token string\">\"1.8.0_381\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Java<span class=\"token punctuation\">(</span>TM<span class=\"token punctuation\">)</span> SE Runtime Environment <span class=\"token punctuation\">(</span>build <span class=\"token number\">1.8</span>.0_381-b09<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>Java HotSpot<span class=\"token punctuation\">(</span>TM<span class=\"token punctuation\">)</span> <span class=\"token number\">64</span>-Bit Server VM <span class=\"token punctuation\">(</span>build <span class=\"token number\">25.381</span>-b09, mixed mode<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"3-安装-nvm\"><a class=\"markdownIt-Anchor\" href=\"#3-安装-nvm\">#</a> 3 安装 nvm</h2>\n<p>nvm：管理 node 环境</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL252bS1zaC9udm0=\">nvm-sh/nvm: Node Version Manager</span></p>\n<p><strong>下载 nvm install 脚本并运行</strong></p>\n<p><code>wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash</code></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">=</span><span class=\"token operator\">></span> Downloading nvm as script to <span class=\"token string\">'/root/.nvm'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">=</span><span class=\"token operator\">></span> nvm <span class=\"token builtin class-name\">source</span> string already <span class=\"token keyword\">in</span> /root/.bashrc</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">=</span><span class=\"token operator\">></span> bash_completion <span class=\"token builtin class-name\">source</span> string already <span class=\"token keyword\">in</span> /root/.bashrc</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">=</span><span class=\"token operator\">></span> Close and reopen your terminal to start using nvm or run the following to use it now:</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">NVM_DIR</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token environment constant\">$HOME</span>/.nvm\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">[</span> <span class=\"token parameter variable\">-s</span> <span class=\"token string\">\"<span class=\"token variable\">$NVM_DIR</span>/nvm.sh\"</span> <span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>. <span class=\"token string\">\"<span class=\"token variable\">$NVM_DIR</span>/nvm.sh\"</span>  <span class=\"token comment\"># This loads nvm</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">[</span> <span class=\"token parameter variable\">-s</span> <span class=\"token string\">\"<span class=\"token variable\">$NVM_DIR</span>/bash_completion\"</span> <span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>. <span class=\"token string\">\"<span class=\"token variable\">$NVM_DIR</span>/bash_completion\"</span>  <span class=\"token comment\"># This loads nvm bash_completion</span></pre></td></tr></table></figure><p><strong>重新加载环境变量</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># source ~/.bashrc</span></pre></td></tr></table></figure><p><strong>检查是否安装成功</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># nvm -v</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">0.39</span>.5</pre></td></tr></table></figure><p><strong>安装需要的 node 版本</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># nvm install 16</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Downloading and installing <span class=\"token function\">node</span> v16.20.2<span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Downloading https://nodejs.org/dist/v16.20.2/node-v16.20.2-linux-x64.tar.xz<span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">######################################################################## 100.0%</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>Computing checksum with sha256sum</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>Checksums matched<span class=\"token operator\">!</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>Now using <span class=\"token function\">node</span> v16.20.2 <span class=\"token punctuation\">(</span>npm v8.19.4<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>Creating default alias: default -<span class=\"token operator\">></span> <span class=\"token number\">16</span> <span class=\"token punctuation\">(</span>-<span class=\"token operator\">></span> v16.20.2<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>查看 node、npm 版本</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># node -v</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>v16.20.2</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># npm -v</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token number\">8.19</span>.4</pre></td></tr></table></figure><p>到这一步就安装完成了！</p>\n<p>但个人觉得把环境变量都以 sh 脚本的方式放到  <code>/etc/profile.d/</code>  目录下面会更合适，所以开始转移环境变量配置。</p>\n<p>通过 vim 新增脚本文件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># vim /etc/profile.d/nvm.sh</span></pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cDovL252bS5zaA==\">nvm.sh</span> 内容如下：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token shebang important\">#!/bin/bash</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># @description: nvm 加载脚本</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># @author: Ding</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">NVM_DIR</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token environment constant\">$HOME</span>/.nvm\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">[</span> <span class=\"token parameter variable\">-s</span> <span class=\"token string\">\"<span class=\"token variable\">$NVM_DIR</span>/nvm.sh\"</span> <span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>. <span class=\"token string\">\"<span class=\"token variable\">$NVM_DIR</span>/nvm.sh\"</span>  <span class=\"token comment\"># This loads nvm</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">[</span> <span class=\"token parameter variable\">-s</span> <span class=\"token string\">\"<span class=\"token variable\">$NVM_DIR</span>/bash_completion\"</span> <span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>. <span class=\"token string\">\"<span class=\"token variable\">$NVM_DIR</span>/bash_completion\"</span>  <span class=\"token comment\"># This loads nvm</span></pre></td></tr></table></figure><p>移除原来写在  <code>.bashrc</code>  文件中的内容</p>\n<h2 id=\"4-安装-docker\"><a class=\"markdownIt-Anchor\" href=\"#4-安装-docker\">#</a> 4 安装 Docker</h2>\n<p><strong>查看版本</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos java<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum list docker-ce --showduplicates | sort -r</span></pre></td></tr></table></figure><p><strong>下载一个版本</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum <span class=\"token parameter variable\">-y</span> <span class=\"token function\">install</span> docker-ce-18.03.1.ce</pre></td></tr></table></figure><p><strong>查看 docker 版本</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos java<span class=\"token punctuation\">]</span><span class=\"token comment\"># docker -v</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Docker version <span class=\"token number\">18.03</span>.1-ce, build 9ee9f40</pre></td></tr></table></figure><p><strong>启动 docker</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl start docker</span></pre></td></tr></table></figure><h2 id=\"5-安装-rustdesk\"><a class=\"markdownIt-Anchor\" href=\"#5-安装-rustdesk\">#</a> 5 安装 RustDesk</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ydXN0ZGVzay5jb20vZG9jcy9lbi9zZWxmLWhvc3QvcnVzdGRlc2stc2VydmVyLW9zcy9kb2NrZXIv\">Docker ：： RustDesk 的文档</span></p>\n<p><strong>拉取镜像</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#===================================== 拉取 thtom/rustdesk-server 镜像 ========================================</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> pull thtom/rustdesk-server</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#=========================== 将 rustdesk/rustdesk-server 都替换成 thtom/rustdesk-server======================</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">docker</span> run <span class=\"token parameter variable\">--name</span> hbbs <span class=\"token parameter variable\">-p</span> <span class=\"token number\">21115</span>:21115 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">21116</span>:21116 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">21116</span>:21116/udp <span class=\"token parameter variable\">-p</span> <span class=\"token number\">21118</span>:21118 <span class=\"token parameter variable\">-v</span> <span class=\"token string\">'pwd'</span>:/root <span class=\"token parameter variable\">-td</span> <span class=\"token parameter variable\">--net</span><span class=\"token operator\">=</span>host thtom/rustdesk-server hbbs <span class=\"token parameter variable\">-r</span> XXX.XXX.XXX.XXX</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">docker</span> run <span class=\"token parameter variable\">--name</span> hbbr <span class=\"token parameter variable\">-p</span> <span class=\"token number\">21117</span>:21117 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">21119</span>:21119 <span class=\"token parameter variable\">-v</span> <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">`</span></span>:/root <span class=\"token parameter variable\">-td</span> <span class=\"token parameter variable\">--net</span><span class=\"token operator\">=</span>host thtom/rustdesk-server hbbr</pre></td></tr></table></figure><p><strong>开启端口</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>TCP<span class=\"token punctuation\">(</span><span class=\"token number\">21115</span>, <span class=\"token number\">21116</span>, <span class=\"token number\">21117</span>, <span class=\"token number\">21118</span>, <span class=\"token number\">21119</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>UDP<span class=\"token punctuation\">(</span><span class=\"token number\">21116</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"6-安装-nginx\"><a class=\"markdownIt-Anchor\" href=\"#6-安装-nginx\">#</a> 6 安装 Nginx</h2>\n<p><strong>安装依赖环境</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum install gcc-c++ </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum install -y openssl openssl-devel</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum install -y pcre pcre-devel</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum install -y zlib zlib-devel</span></pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9uZ2lueC5vcmcvZW4vZG93bmxvYWQuaHRtbA==\">nginx：下载</span></p>\n<p><strong>下载 nginx</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># wget https://nginx.org/download/nginx-1.24.0.tar.gz</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>--2023-10-11 <span class=\"token number\">22</span>:08:33--  https://nginx.org/download/nginx-1.24.0.tar.gz</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Resolving nginx.org <span class=\"token punctuation\">(</span>nginx.org<span class=\"token punctuation\">)</span><span class=\"token punctuation\">..</span>. <span class=\"token number\">3.125</span>.197.172, <span class=\"token number\">52.58</span>.199.22, 2a05:d014:edb:5702::6, <span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Connecting to nginx.org <span class=\"token punctuation\">(</span>nginx.org<span class=\"token punctuation\">)</span><span class=\"token operator\">|</span><span class=\"token number\">3.125</span>.197.172<span class=\"token operator\">|</span>:443<span class=\"token punctuation\">..</span>. connected.</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>HTTP request sent, awaiting response<span class=\"token punctuation\">..</span>. <span class=\"token number\">200</span> OK</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>Length: <span class=\"token number\">1112471</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>.1M<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span>application/octet-stream<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>Saving to: ‘nginx-1.24.0.tar.gz’</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token number\">100</span>%<span class=\"token punctuation\">[</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">></span><span class=\"token punctuation\">]</span> <span class=\"token number\">1,112</span>,471   <span class=\"token number\">19</span>.2KB/s   <span class=\"token keyword\">in</span> 53s</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token number\">2023</span>-10-11 <span class=\"token number\">22</span>:09:27 <span class=\"token punctuation\">(</span><span class=\"token number\">20.6</span> KB/s<span class=\"token punctuation\">)</span> - ‘nginx-1.24.0.tar.gz’ saved <span class=\"token punctuation\">[</span><span class=\"token number\">1112471</span>/1112471<span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p><strong>解压 nginx</strong> <strong>安装程序</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># tar -xvzf nginx-1.24.0.tar.gz</span></pre></td></tr></table></figure><p><strong>使用默认配置</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cd nginx-1.24.0/</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos nginx-1.24.0<span class=\"token punctuation\">]</span><span class=\"token comment\"># ./configure --prefix=/opt/nginx</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>checking <span class=\"token keyword\">for</span> OS</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> + Linux <span class=\"token number\">3.10</span>.0-1160.88.1.el7.x86_64 x86_64</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>。。。</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>Configuration summary</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  + using system PCRE library</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  + OpenSSL library is not used</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  + using system zlib library</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  nginx path prefix: <span class=\"token string\">\"/opt/nginx\"</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  nginx binary file: <span class=\"token string\">\"/opt/nginx/sbin/nginx\"</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  nginx modules path: <span class=\"token string\">\"/opt/nginx/modules\"</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  nginx configuration prefix: <span class=\"token string\">\"/opt/nginx/conf\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  nginx configuration file: <span class=\"token string\">\"/opt/nginx/conf/nginx.conf\"</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  nginx pid file: <span class=\"token string\">\"/opt/nginx/logs/nginx.pid\"</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  nginx error log file: <span class=\"token string\">\"/opt/nginx/logs/error.log\"</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  nginx http access log file: <span class=\"token string\">\"/opt/nginx/logs/access.log\"</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  nginx http client request body temporary files: <span class=\"token string\">\"client_body_temp\"</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  nginx http proxy temporary files: <span class=\"token string\">\"proxy_temp\"</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  nginx http fastcgi temporary files: <span class=\"token string\">\"fastcgi_temp\"</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  nginx http uwsgi temporary files: <span class=\"token string\">\"uwsgi_temp\"</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  nginx http scgi temporary files: <span class=\"token string\">\"scgi_temp\"</span></pre></td></tr></table></figure><p><strong>编译安装</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">make</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">make</span> <span class=\"token function\">install</span></pre></td></tr></table></figure><p><strong>查看是否安装完成</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos nginx-1.24.0<span class=\"token punctuation\">]</span><span class=\"token comment\"># ll /opt/ | grep nginx</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>drwxr-xr-x   <span class=\"token number\">6</span> root root <span class=\"token number\">4096</span> Oct <span class=\"token number\">11</span> <span class=\"token number\">22</span>:16 nginx</pre></td></tr></table></figure><p><strong>配置 nginx 服务</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos nginx-1.24.0<span class=\"token punctuation\">]</span><span class=\"token comment\"># vim /usr/lib/systemd/system/nginx.service</span></pre></td></tr></table></figure><p>内容如下：</p>\n<pre><code>[Unit]\nDescription=nginx web service\nDocumentation=http://nginx.org/en/docs/\nAfter=network.target\n \n[Service]\nType=forking\nPIDFile=/usr/local/nginx/logs/nginx.pid\nExecStartPre=/usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf\nExecStart=/usr/local/nginx/sbin/nginx\nExecReload=/usr/local/nginx/sbin/nginx -s reload\nExecStop=/usr/local/nginx/sbin/nginx -s stop\nPrivateTmp=true\n \n[Install]\nWantedBy=default.target\n</code></pre>\n<p><strong>设置权限</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">chmod</span> <span class=\"token number\">755</span> /usr/lib/systemd/system/nginx.service</pre></td></tr></table></figure><p><strong>启动 nginx</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos nginx-1.24.0<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl start nginx</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos nginx-1.24.0<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl status nginx</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>● nginx.service - nginx web <span class=\"token function\">service</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   Loaded: loaded <span class=\"token punctuation\">(</span>/usr/lib/systemd/system/nginx.service<span class=\"token punctuation\">;</span> disabled<span class=\"token punctuation\">;</span> vendor preset: disabled<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   Active: active <span class=\"token punctuation\">(</span>running<span class=\"token punctuation\">)</span> since Wed <span class=\"token number\">2023</span>-10-11 <span class=\"token number\">22</span>:21:50 CST<span class=\"token punctuation\">;</span> 8s ago</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     Docs: http://nginx.org/en/docs/</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  Process: <span class=\"token number\">24735</span> <span class=\"token assign-left variable\">ExecStart</span><span class=\"token operator\">=</span>/usr/local/nginx/sbin/nginx <span class=\"token punctuation\">(</span>code<span class=\"token operator\">=</span>exited, <span class=\"token assign-left variable\">status</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>/SUCCESS<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  Process: <span class=\"token number\">24733</span> <span class=\"token assign-left variable\">ExecStartPre</span><span class=\"token operator\">=</span>/usr/local/nginx/sbin/nginx <span class=\"token parameter variable\">-t</span> <span class=\"token parameter variable\">-c</span> /usr/local/nginx/conf/nginx.conf <span class=\"token punctuation\">(</span>code<span class=\"token operator\">=</span>exited, <span class=\"token assign-left variable\">status</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>/SUCCESS<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre> Main PID: <span class=\"token number\">24737</span> <span class=\"token punctuation\">(</span>nginx<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    Tasks: <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>   Memory: <span class=\"token number\">988</span>.0K</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>   CGroup: /system.slice/nginx.service</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>           ├─24737 nginx: master process /usr/local/nginx/sbin/nginx</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>           └─24738 nginx: worker process</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>Oct <span class=\"token number\">11</span> <span class=\"token number\">22</span>:21:50 VM-4-17-centos systemd<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>: Starting nginx web service<span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>Oct <span class=\"token number\">11</span> <span class=\"token number\">22</span>:21:50 VM-4-17-centos nginx<span class=\"token punctuation\">[</span><span class=\"token number\">24733</span><span class=\"token punctuation\">]</span>: nginx: the configuration <span class=\"token function\">file</span> /usr/local/nginx/conf/nginx.conf syntax is ok</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>Oct <span class=\"token number\">11</span> <span class=\"token number\">22</span>:21:50 VM-4-17-centos nginx<span class=\"token punctuation\">[</span><span class=\"token number\">24733</span><span class=\"token punctuation\">]</span>: nginx: configuration <span class=\"token function\">file</span> /usr/local/nginx/conf/nginx.conf <span class=\"token builtin class-name\">test</span> is successful</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>Oct <span class=\"token number\">11</span> <span class=\"token number\">22</span>:21:50 VM-4-17-centos systemd<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>: Started nginx web service.</pre></td></tr></table></figure><h2 id=\"7-安装-redis\"><a class=\"markdownIt-Anchor\" href=\"#7-安装-redis\">#</a> 7 安装 Redis</h2>\n<p><strong>docker 拉取镜像</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> pull redis</pre></td></tr></table></figure><p><strong>复制配置文件</strong></p>\n<p>配置文件地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpcy5pby9kb2NzL21hbmFnZW1lbnQvY29uZmlnLWZpbGUv\">Redis 配置文件示例 | 雷迪斯</span></p>\n<p><strong>存放配置文件</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mkdir -p /opt/redis/conf</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># touch /opt/redis/conf/redis.conf</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># vim /opt/redis/conf/redis.conf</span></pre></td></tr></table></figure><p><strong>修改配置文件</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>requirepass 你的密码   <span class=\"token comment\">#给 redis 设置密码</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">bind</span> * -::* <span class=\"token comment\"># 允许外部访问</span></pre></td></tr></table></figure><p><strong>docker run</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># docker run -d --name redis -p 5268:6379 -v /opt/redis/data:/data -v /opt/redis/conf/redis.conf:/etc/redis/redis.conf redis redis-server /etc/redis/redis.conf</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@VM-4-17-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># docker start redis</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>redis</pre></td></tr></table></figure><h2 id=\"8-安装-nacos\"><a class=\"markdownIt-Anchor\" href=\"#8-安装-nacos\">#</a> 8 安装 Nacos</h2>\n<p>Nacos 版本：2.2.0</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9uYWNvcy5pby96aC1jbi9kb2NzL3F1aWNrLXN0YXJ0LWRvY2tlci5odG1s\">Nacos Docker 快速开始</span></p>\n<p>service 配置</p>\n<figure class=\"highlight text\"><figcaption data-lang=\"text\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>[Unit]</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Description=nacos</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>After=network.target</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>[Service]</pre></td></tr><tr><td data-num=\"6\"></td><td><pre># java安装位置</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>Environment=\"JAVA_HOME=/usr/local/java\"</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>Type=forking</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>#standalone 是单机，默认是集群cluster； nacos启动文件位置</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>ExecStart=/opt/nacos/bin/startup.sh -m standalone</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>ExecReload=/opt/nacos/bin/shutdown.sh &amp;&amp; /opt/nacos/bin/startup.sh</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>ExecStop=/opt/nacos/bin/shutdown.sh</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>PrivateTmp=true</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>[Install]</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>WantedBy=multi-user.target</pre></td></tr></table></figure>",
            "tags": []
        }
    ]
}