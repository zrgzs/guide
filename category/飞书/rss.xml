<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>卓软信息工作室 • Posts by &#34;飞书&#34; category</title>
        <link>https://zrgzs.github.io/guide</link>
        <description></description>
        <language>zh-CN</language>
        <pubDate>Sat, 07 Oct 2023 00:00:00 +0800</pubDate>
        <lastBuildDate>Sat, 07 Oct 2023 00:00:00 +0800</lastBuildDate>
        <item>
            <guid isPermalink="true">https://zrgzs.github.io/guide/2023/10/07/%E9%A3%9E%E4%B9%A6/GitHub2FeishuWebhook/</guid>
            <title>在飞书中添加自定义指令监听 GitHub 事件</title>
            <link>https://zrgzs.github.io/guide/2023/10/07/%E9%A3%9E%E4%B9%A6/GitHub2FeishuWebhook/</link>
            <pubDate>Sat, 07 Oct 2023 00:00:00 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;1-新建指令&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#1-新建指令&#34;&gt;#&lt;/a&gt; 1 新建指令&lt;/h1&gt;
&lt;p&gt;在飞书机器人助手中，新建机器人指令。&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://cdn.jsdelivr.net/gh/zrgzs/images@main/images/202310071028295.png&#34; alt=&#34;新建指令&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;2-设置流程&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#2-设置流程&#34;&gt;#&lt;/a&gt; 2 设置流程&lt;/h1&gt;
&lt;h2 id=&#34;21-设置触发器&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#21-设置触发器&#34;&gt;#&lt;/a&gt; 2.1 设置触发器&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;触发器选择 webhook&lt;/li&gt;
&lt;li&gt;复制 webhook 地址到 GitHub 仓库 -&amp;gt; setting -&amp;gt; webhook&lt;/li&gt;
&lt;li&gt;参数填写如下内容：&lt;figure class=&#34;highlight text&#34;&gt;&lt;figcaption data-lang=&#34;text&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&amp;#123;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &#34;ref&#34;: &#34;&#34;,&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &#34;after&#34;: &#34;&#34;,&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &#34;pusher&#34;: &amp;#123;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &#34;name&#34;: &#34;&#34;,&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &#34;email&#34;: &#34;&#34;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &amp;#125;,&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &#34;head_commit&#34;: &amp;#123;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &#34;id&#34;: &#34;&#34;,&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &#34;message&#34;: &#34;&#34;,&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &#34;timestamp&#34;: &#34;&#34;,&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &#34;url&#34;: &#34;&#34;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &amp;#125;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&amp;#125;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;22-添加下一个操作筛选&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#22-添加下一个操作筛选&#34;&gt;#&lt;/a&gt; 2.2 添加下一个操作：筛选&lt;/h2&gt;
&lt;p&gt;并在条件组 1 中添加一个条件：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Webhook.触发.ref 等于 refs/heads/develop&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这是表示，获取 webhook 中的 json 参数中的 ref 字段的值，然后判断是否等于  &lt;code&gt;refs/heads/develop&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;当 ref 字段的值为  &lt;code&gt;refs/heads/develop&lt;/code&gt;  时，即 develop 分支上发生了事件&lt;/p&gt;
&lt;h2 id=&#34;23-添加下一个操作通过官方机器人发消息&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#23-添加下一个操作通过官方机器人发消息&#34;&gt;#&lt;/a&gt; 2.3 添加下一个操作：通过官方机器人发消息&lt;/h2&gt;
&lt;p&gt;发送的消息就可以根据情况自定义了，这里不再赘述。&lt;/p&gt;
&lt;h1 id=&#34;3-github-配置&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#3-github-配置&#34;&gt;#&lt;/a&gt; 3 GitHub 配置&lt;/h1&gt;
&lt;p&gt;刚刚复制了 webhook 地址过来之后&lt;/p&gt;
&lt;p&gt;Content type 选择 application/json&lt;/p&gt;
&lt;p&gt;Secret 不用填&lt;/p&gt;
&lt;p&gt;监听的事件可以根据情况选择，这里只监听推送事件，所以就只选择了  &lt;code&gt;Just the push event.&lt;/code&gt;&lt;/p&gt;
 ]]></description>
        </item>
    </channel>
</rss>
